<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç¦å½©3Dæ•°æ®åˆ†æå™¨</title>
<link rel="manifest" href="manifest.json">
<style>
body{font-family:"Microsoft YaHei",sans-serif;padding:20px;max-width:720px;margin:auto;}
h1{text-align:center;color:#d9534f;}
input,button{padding:8px;margin:5px;}
table{border-collapse:collapse;width:100%;margin-top:10px;}
th,td{border:1px solid #ccc;padding:6px;text-align:center;}
.result{margin-top:16px;font-size:18px;}
</style>
</head>
<body>
<h1>ğŸ² ç¦å½©3Dæ•°æ®åˆ†æå™¨</h1>

<div>
<label>æ€å·ï¼ˆé€—å·åˆ†éš”ï¼‰</label>
<input id="kill" type="text" placeholder="ä¾‹å¦‚:2,8">
</div>
<div>
<button onclick="generateAll()">ç”Ÿæˆå·ç </button>
</div>

<div class="result" id="output">ğŸ‘‰ ç‚¹å‡»ç”Ÿæˆ</div>

<h2>å†å²å¼€å¥–</h2>
<table id="historyTable">
<thead>
<tr><th>æœŸå·</th><th>å¼€å¥–å·ç </th></tr>
</thead>
<tbody></tbody>
</table>

<h2>å·ç ç»Ÿè®¡ï¼ˆå‡ºç°æ¬¡æ•°ï¼‰</h2>
<table id="statTable">
<thead>
<tr><th>å·ç </th><th>æ¬¡æ•°</th></tr>
</thead>
<tbody></tbody>
</table>

<script>
const history = [
    {"period":"20250915-001","numbers":[1,3,6]},
    {"period":"20250915-002","numbers":[0,2,5]},
    {"period":"20250915-003","numbers":[4,7,8]},
    {"period":"20250915-004","numbers":[1,2,3]},
    {"period":"20250915-005","numbers":[0,5,6]}
];

function renderHistory(){
    const tbody = document.getElementById("historyTable").querySelector("tbody");
    tbody.innerHTML = "";
    history.forEach(item=>{
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${item.period}</td><td>${item.numbers.join(",")}</td>`;
        tbody.appendChild(tr);
    });
}

function getStats(){
    let count = Array(10).fill(0);
    history.forEach(item=>item.numbers.forEach(n=>count[n]++));
    return count;
}

function renderStats(){
    const tbody = document.getElementById("statTable").querySelector("tbody");
    tbody.innerHTML = "";
    const stats = getStats();
    stats.forEach((c,n)=>{
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${n}</td><td>${c}</td>`;
        tbody.appendChild(tr);
    });
}

function generate3D(recommend, kill=[]){
    let result=[];
    for(let i=0;i<3;i++){
        let candidates = recommend.filter(n=>!kill.includes(n));
        if(candidates.length===0) candidates=[0,1,2,3,4,5,6,7,8,9];
        let num = candidates[Math.floor(Math.random()*candidates.length)];
        result.push(num);
    }
    return result;
}

function generateAll(){
    const kill = document.getElementById("kill").value.split(",").map(n=>parseInt(n.trim())).filter(n=>!isNaN(n));
    const recommend = getStats().map((c,n)=>n);
    const num = generate3D(recommend, kill);
    document.getElementById("output").innerText = "ğŸ”¹ "+num.join(" ");
}

renderHistory();
renderStats();
</script>
</body>
</html>
